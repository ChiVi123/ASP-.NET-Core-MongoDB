@{
    ViewData["Title"] = "Employees Page";
}

@model List<CoreMongoDB.Models.Employee>

<div class="row">

    <div class="col-md-4">

        <div class="row" style="display: none;">
            <div class="col-md-4">
                <label>Id: </label>
            </div>
            <div class="col-md-8">
                <input id="txtEmpId" class="inputField" style="width: 100%;" placeholder="Id" />
            </div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <label>Name: </label>
            </div>
            <div class="col-md-8">
                <input id="txtName" class="inputField" style="width: 100%;" placeholder="Name" />
            </div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <label>Card No: </label>
            </div>
            <div class="col-md-8">
                <input id="txtCardNumber" class="inputField" style="width: 100%;" placeholder="Card Number" />
            </div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <label>Salary: </label>
            </div>
            <div class="col-md-8">
                <input id="txtSalary" class="inputField" type="number" style="width: 100%;" placeholder="Salary" />
            </div>
        </div>

        <div class="row">
            <div class="col-md-4"></div>
            <div class="col-md-8">
                <button class="btn btn-primary" onclick="Save()">Save</button>
                <button class="btn btn-danger" onclick="Reset()" style="float: right;">Reset</button>
            </div>
        </div>

    </div>

    <div class="col-md-8">
        @*<table id="tblEmployee" class="table table-striped table-bordered">

            <thead>
                <tr>
                    <th>Employee Id</th>
                    <th>Name</th>
                    <th>CardNumber</th>
                    <th>Age</th>
                    <th>Action</th>
                </tr>
            </thead>

            <tbody></tbody>

        </table>*@
        <table>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.Id</td>
                    <td>@item.Name</td>
                    <td>
                        @*<a asp-controller="Home" asp-action="Update"
                    asp-route-id="@item.Id">Edit</a>*@
                        Edit
                    </td>
                    <td>
                        @*<a asp-controller="Home" asp-action="ConfirmDelete"
                    asp-route-id="@item.Id">Delete</a>*@
                        Delete
                    </td>

                </tr>
            }
        </table>
    </div>

</div>

<script src="~/jquery/jquery.min.js"></script>
<script type="text/javascript">
    var _employees = [];
    $(document).ready(function () {
        LoadEmployee();
    });
    function LoadEmployee() {
        Reset();
        $.get("../Employees/GetEmployees", function (emps) {
            _employees = emps;
            $.map(emps, function (emp) {
                var tempStr = "<tr>";
                //tempStr += String.format("<td> {0} </td>", emp.id);
                //tempStr += String.format("<td> {0} </td>", emp.name);
                //tempStr += String.format("<td> {0} </td>", emp.cardNumber);
                //tempStr += String.format("<td> {0} </td>", emp.salary);
                //tempStr += String.format("<td> {0} </td>", emp.id);
                //tempStr += String.format("<td> <button class= 'btn btn-primary' onClick ='Edit(\"{0}\")'>Edit</button> < button class= 'btn btn-danger' onClick ='Delete(\"{1}\")'>Delete</button> " + "</td >", mbers.id, mbers.id);

                tempStr += "<td> " + emp.id + " </td>";
                tempStr += "<td> " + emp.name + " </td>";
                tempStr += "<td> " + emp.cardNumber + " </td>";
                tempStr += "<td> " + emp.salary + " </td>";
                tempStr += "<td> " + emp.id + " </td>";
                tempStr += "<td> <button class= 'btn btn-primary' onClick ='Edit(\"" + mbers.id + "\")'>Edit</button> < button class= 'btn btn-danger' onClick ='Delete(\"" + mbers.id + "\")'>Delete</button> " + "</td >";
                tempStr += "</tr>";
                $("#tblEmployee tbody").append(tempStr);
            });
        });
    };

    function Reset() {
        _employees = [];
        $("#tblEmployee tbody tr").remove();
        $(".inputField").val("");
    };

    function Save() {
        var employee = {
            Id: $.trim($("#txtEmpId").val()),
            Name: $.trim($("#txtName").val()),
            CardNumber: $.trim($("#txtCardNumber").val()),
            Salary: $.trim($("#txtSalary").val())
        };
        $.post("../Employees/SaveEmp", employee, function (emp) {
            LoadEmployees();
        });
    };

</script>